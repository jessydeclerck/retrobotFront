<section>
  <mat-tab-group mat-align-tabs="center" >
    <mat-tab *ngFor="let job of jobs | keyvalue" [label]="job.value">
      <app-harvest-control-panel [job]="job.value" (resourcesToHarvestChange)="selectedResources = $event"></app-harvest-control-panel>
    </mat-tab>
  </mat-tab-group>
  <form class="map" [formGroup]="scriptForm" (ngSubmit)="useScript(scriptForm.value)">
    <div>
      <mat-form-field>
        <input matInput placeholder="Nom du script" formControlName="scriptName">
      </mat-form-field>
      <mat-form-field>
        <input matInput placeholder="Nom du personnage" formControlName="characterName">
      </mat-form-field>
    </div>
    <app-map-builder></app-map-builder>
    <div *ngIf="script$ | async as script" class="confirm">
      <div class="error" *ngIf="!script[2]"> Veuillez déclarer un point de départ</div>
      <div class="error" *ngIf="!script[1]"> Veuillez déclarer une banque</div>
      <div class="error" *ngIf="!script[0].length"> Sélectionnez au moins une ressource à récolter</div>
      <div>
        <button mat-button type="submit" [disabled]="!scriptForm.valid || !script[2] || !script[1] || !script[0].length">Lancer l'exécution</button>
      </div>
    </div>
  </form>

</section>



